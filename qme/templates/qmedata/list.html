{% extends 'base.html' %}

{% block title %} Измерительное оборудование {% endblock %}

{% block content %}
{% csrf_token %}
{% load static %}

<link href="{% static 'style.css' %}" rel="stylesheet" type="text/css">
<div class="divhead">QME PORTAL</div>

<div class="leftcolon">
<div class="widget">
  <h3 class="widget-title">Меню:</h3>
  <ul class="widget-list">
    <li><a href="">Список стоек</a></li>

    <li><a href="firstday">Калибровка</a></li>
    <li><a href="dataview">База данных</a></li>
    <li><a href="rating">Антирейтинг</a></li>

  </ul>
  {% if user.is_authenticated %}
  <h3 class="widget-title">Пользователь:</h3>
  <ul class="widget-list">
    <li><a href="">{{user.get_username}}</a></li>
    <li><a href="{% url 'logout'%}?next={{request.path}}">Выйти</a></li>
  </ul>
  {% endif %}
</div>
</div>

<div class ="rightcolon">
	<h2 style="padding-left: 50px;
padding-top: 50px">Калибровка:{{text}}</h2>


<a href="firstday" class="button7">Первый калибровочный день</a>
<a href="secondday" class="button7">Второй калибровочный день</a>


<form method="post">
{% csrf_token %}
<input type = "hidden" name="data" value ="Save">


<table id = "table" style="padding-left: 30px; padding-top:30px">
<tr><th>Оборудование</th><th>Вес</th><th>Дл. окр. №1</th><th>Дл. окр. №2</th><th>PD</th><th>Vent</th><th>Отключена</th></tr>
{% for e in context %}
<tr  height ="35">
  <td>{{e.equipment_name.label}}{{e.equipment_name.as_hidden}}</td>
  <td>{{e.weight_value}}</td>
  <td>{{e.size_one_value}}</td>
  <td>{{e.size_two_value}}</td>
  <td>{{e.airPd_value}}</td>
  <td>{{e.airVent_value}}</td>
  <td><input type="checkbox" onclick = "ClickOff(this)"></td>
</tr>
{% endfor %}

</table>
<input type="submit"  value = "Сохранить" style="margin-left: 30px">

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

</div>

<div align = "center">

  <p>Designed by Igor Chesnov</p>
  <address>igor.chesnov@jti.com</address>

</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
tablemain=table.children[0];

for (let i=1; i<tablemain.childElementCount; i++ )


{ tablemain.children[i].children[1].children[0].step=0.001;
  tablemain.children[i].children[1].children[0].size=1;
  tablemain.children[i].children[3].children[0].step=0.01;
  tablemain.children[i].children[4].children[0].step=1;
  tablemain.children[i].children[5].children[0].step=0.1;
  str = tablemain.children[i].children[0].textContent;
  if (str.match(/SDL/) == null)
  {tablemain.children[i].children[2].children[0].step=0.01;}
  else
  {tablemain.children[i].children[2].children[0].step=0.001;
  tablemain.children[i].children[3].children[0].disabled=true;}

}

trcolor=table.children[0];

for (let i=1; i<trcolor.childElementCount; i++)

{
trcolor.children[i].bgColor="MediumSeaGreen";
i++;

}

   document.addEventListener('wheel', function(event)
    {

    console.log(event.deltaX, event.deltaY);
});


function ClickOff(a) {


      row=a.parentNode.parentNode.rowIndex;
      bool = a.checked;


      stroke = tablemain.rows[row];

      for (let i = 0; i < 6; i++)
        {
          if (stroke.children[i].children[0].value != "")
          {
          stroke.children[i].children[0].disabled=bool;
        }
        }
    }

$(document).ready(function(){
  $("input").hover(function(){
    $(this).focus();
    });
});
</script>

{% endblock %}
